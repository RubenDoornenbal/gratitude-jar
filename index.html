<!DOCTYPE html>
<html>
<head>
    <title>Based Gratitude Jar</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js" crossorigin></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .jar {
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 100%);
            border: 2px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            animation: sparkle 2s infinite;
        }
        @keyframes sparkle {
            0%, 100% { box-shadow: 0 0 15px rgba(255,223,186,0.5); }
            50% { box-shadow: 0 0 25px rgba(255,223,186,0.8); }
        }
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
        }
        .sparkle:nth-child(1) { top: 20%; left: 10%; animation: float 3s infinite; }
        .sparkle:nth-child(2) { top: 30%; right: 20%; animation: float 4s infinite 1s; }
        .sparkle:nth-child(3) { bottom: 30%; left: 15%; animation: float 3.5s infinite 0.5s; }
        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.8; }
            50% { transform: translateY(-10px) scale(1.2); opacity: 1; }
        }
        body {
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            min-height: 100vh;
        }
    </style>
</head>
<body class="min-h-screen p-8">
    <div id="root"></div>
    <script type="text/babel">
        const autoNotes = [
            "Today I touched grass. It wasn't as bad as Twitter said it would be ðŸŒ±",
            "Grateful that my Linux install only broke twice today",
            "Dear jar: Today I invented a new programming language. It's like Rust but with even more compiler errors",
            "Today's achievement: Explaining to HR why 'sudo make me a sandwich' isn't harassment",
            "Spent today arguing why Web3 will definitely work this time",
            "Today I learned that AI won't take my job because I don't do any work anyway",
            "Dear future me: If you're reading this, I probably forgot to push to production",
            "Today's gratitude: My code compiled on the first try. Just kidding, that never happens",
            "Was too busy explaining why Vim is superior to actually write anything today",
            "Plot twist: The real technical debt was the friends we made along the way",
            "Today I optimized my gratitude microservices architecture using blockchain",
            "Currently building a neural network to generate these messages. Oh wait...",
            "Too busy defending Elon on Twitter to write a proper entry",
            "Today's achievement: Survived another JavaScript framework release",
            "Dear jar: Today I explained why tabs are better than spaces for 6 hours straight",
            "Was too busy writing a 5000-word essay on why cryptocurrency is the future",
            "Today I identified as root and nobody can tell me otherwise",
            "Spent today explaining why AGI is actually just around the corner this time",
            "Today's mood: Telling junior devs their code is O(nÂ²) and watching them cry",
            "Plot twist: Maybe the real 10x engineer was the burnout we developed along the way",
            "Today's pronouns: sudo/su",
            "Grateful that my crypto portfolio is only down 69% this year",
            "Today I mansplained binary. Twice.",
            "Dear jar: The only thing more inflated than the economy is my ego",
            "Was too busy writing based tweets to touch grass today"
        ];

        const storage = {
            get: (key) => {
                try {
                    return JSON.parse(localStorage.getItem(key));
                } catch {
                    return null;
                }
            },
            set: (key, value) => {
                try {
                    localStorage.setItem(key, JSON.stringify(value));
                    return true;
                } catch {
                    return false;
                }
            }
        };

        const App = () => {
            const [notes, setNotes] = React.useState([]);
            const [newNote, setNewNote] = React.useState('');
            const [isRevealed, setIsRevealed] = React.useState(false);
            const [showRecap, setShowRecap] = React.useState(false);
            const [timeMachine, setTimeMachine] = React.useState(0);

            React.useEffect(() => {
                const savedNotes = storage.get('gratitudeNotes') || [];
                checkAndAddNote(savedNotes);
                
                const now = new Date();
                if (now.getMonth() === 11 && now.getDate() === 31) {
                    setShowRecap(true);
                }
            }, [timeMachine]);

            const checkAndAddNote = (savedNotes) => {
                const mockDate = new Date();
                mockDate.setDate(mockDate.getDate() + parseInt(timeMachine));
                const today = mockDate.toLocaleDateString();
                const hasNoteToday = savedNotes.some(note => note.date === today);
                
                if (!hasNoteToday) {
                    const randomNote = autoNotes[Math.floor(Math.random() * autoNotes.length)];
                    const autoNote = {
                        text: `âœ¨ ${randomNote}`,
                        date: today,
                        id: Date.now(),
                        isAuto: true
                    };
                    const updatedNotes = [...savedNotes, autoNote].sort((a, b) => 
                        new Date(b.date) - new Date(a.date)
                    );
                    setNotes(updatedNotes);
                    storage.set('gratitudeNotes', updatedNotes);
                } else {
                    setNotes(savedNotes);
                }
            };

            const saveNote = () => {
                if (!newNote.trim()) return;
                const mockDate = new Date();
                mockDate.setDate(mockDate.getDate() + parseInt(timeMachine));
                const updatedNotes = [...notes, {
                    text: newNote,
                    date: mockDate.toLocaleDateString(),
                    id: Date.now()
                }].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                setNotes(updatedNotes);
                storage.set('gratitudeNotes', updatedNotes);
                setNewNote('');
            };

            return (
                <div className="max-w-md mx-auto relative">
                    <div className="mb-4 p-4 bg-white/10 rounded-lg">
                        <h2 className="text-white mb-2">Time Travel Controls</h2>
                        <div className="flex items-center gap-4">
                            <div className="flex-1">
                                <label className="text-white">Days offset: </label>
                                <input 
                                    type="number" 
                                    value={timeMachine}
                                    onChange={(e) => setTimeMachine(e.target.value)}
                                    className="bg-white/20 text-white p-2 rounded w-20"
                                />
                            </div>
                            <button 
                                onClick={() => {
                                    localStorage.clear();
                                    setNotes([]);
                                    setTimeMachine(0);
                                }} 
                                className="px-4 py-2 bg-red-500/50 text-white rounded hover:bg-red-600/50"
                            >
                                Reset All
                            </button>
                        </div>
                    </div>
                    
                    <div className="jar rounded-3xl p-6 text-white">
                        <div className="sparkle"></div>
                        <div className="sparkle"></div>
                        <div className="sparkle"></div>
                        
                        <h1 className="text-2xl font-bold mb-6 text-center">âœ¨ Based Gratitude Jar âœ¨</h1>
                        
                        <div className="space-y-4">
                            <div className="flex gap-2">
                                <input
                                    type="text"
                                    value={newNote}
                                    onChange={(e) => setNewNote(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && saveNote()}
                                    placeholder="Write something based that happened..."
                                    className="flex-1 p-2 border rounded"
                                />
                                <button 
                                    onClick={saveNote}
                                    className="px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors"
                                >
                                    Add
                                </button>
                            </div>

                            <div className="text-sm text-white/70 text-center">
                                {notes.length} {notes.length === 1 ? 'based moment' : 'based moments'} captured
                            </div>

                            <button
                                onClick={() => setIsRevealed(!isRevealed)}
                                className="w-full px-4 py-3 border border-white/20 rounded-lg hover:bg-white/10 transition-colors"
                            >
                                {isRevealed ? 'âœ¨ Hide Memories âœ¨' : 'âœ¨ Reveal Memories âœ¨'}
                            </button>

                            {showRecap && (
                                <div className="p-4 bg-white/20 rounded-lg border border-white/30 mt-4">
                                    <h2 className="text-xl font-bold mb-3">ðŸŽ‰ Year-End Recap</h2>
                                    <p>You've captured {notes.length} based moments this year!</p>
                                    <p className="mt-2">Most active month: {
                                        Object.entries(notes.reduce((acc, note) => {
                                            const month = new Date(note.date).toLocaleString('default', { month: 'long' });
                                            acc[month] = (acc[month] || 0) + 1;
                                            return acc;
                                        }, {})).sort((a, b) => b[1] - a[1])[0]?.[0] || 'None'
                                    }</p>
                                </div>
                            )}

                            {isRevealed && (
                                <div className="space-y-3 mt-4">
                                    {notes.map((note) => (
                                        <div
                                            key={note.id}
                                            className={`p-4 rounded-lg border ${note.isAuto ? 'bg-white/5 border-white/10' : 'bg-white/10 border-white/20'}`}
                                        >
                                            <div className="text-sm text-white/70">{note.date}</div>
                                            <div className="mt-2" style={{opacity: note.isAuto ? 0.8 : 1}}>{note.text}</div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>